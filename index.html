
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;ruby&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="ruby">ruby</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#connecting" class="toc-h2 toc-link" data-title="Connecting">Connecting</a>
                  </li>
                  <li>
                    <a href="#receiving" class="toc-h2 toc-link" data-title="Receiving">Receiving</a>
                  </li>
                  <li>
                    <a href="#delivering" class="toc-h2 toc-link" data-title="Delivering">Delivering</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#communication-workflow" class="toc-h1 toc-link" data-title="Communication workflow">Communication workflow</a>
          </li>
          <li>
            <a href="#general-api-specifications" class="toc-h1 toc-link" data-title="General API Specifications">General API Specifications</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#http-request" class="toc-h2 toc-link" data-title="HTTP Request">HTTP Request</a>
                  </li>
                  <li>
                    <a href="#request-headers" class="toc-h2 toc-link" data-title="Request Headers">Request Headers</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#language-pairs" class="toc-h1 toc-link" data-title="Language Pairs">Language Pairs</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#http-request-2" class="toc-h2 toc-link" data-title="HTTP Request">HTTP Request</a>
                  </li>
                  <li>
                    <a href="#request-headers-2" class="toc-h2 toc-link" data-title="Request Headers">Request Headers</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#receiving-content" class="toc-h1 toc-link" data-title="Receiving Content">Receiving Content</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-project" class="toc-h2 toc-link" data-title="Create project">Create project</a>
                  </li>
                  <li>
                    <a href="#add-file-to-project" class="toc-h2 toc-link" data-title="Add file to project">Add file to project</a>
                  </li>
                  <li>
                    <a href="#commit-project" class="toc-h2 toc-link" data-title="Commit project">Commit project</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#delivering-content" class="toc-h1 toc-link" data-title="Delivering Content">Delivering Content</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#notifications" class="toc-h2 toc-link" data-title="Notifications">Notifications</a>
                  </li>
                  <li>
                    <a href="#job-status" class="toc-h2 toc-link" data-title="Job Status">Job Status</a>
                  </li>
                  <li>
                    <a href="#download-translation" class="toc-h2 toc-link" data-title="Download Translation">Download Translation</a>
                  </li>
                  <li>
                    <a href="#confirm-delivery" class="toc-h2 toc-link" data-title="Confirm Delivery">Confirm Delivery</a>
                  </li>
              </ul>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the Translation Proxy API consumer specification! You can use the information presented here to build an API that Translation Proxy is able to consume.</p>

<p>The Translation Proxy system allows WPML and Translation Services to communicate efficiently. Send jobs for translation and download completed translations. There is no direct communication between WPML and Translation Services.</p>
<h3 id='connecting'>Connecting</h3>
<p>WPML has a common interface, that allows website admins to activate and authenticate with the Translation Service, select translatable content and send it to Translation Proxy.</p>
<h3 id='receiving'>Receiving</h3>
<p>As soon as Translation Proxy delivers the data to the Translation Service, website admins are expected to login to the Translation Service client panel,
and complete any additional configuration (select translators, accept bids, etc.) that may be required.</p>
<h3 id='delivering'>Delivering</h3>
<p>When a translation is ready, Translation Service will send a notification to Translation Proxy to download the completed translation and deliver it to WPML.</p>
<h1 id='communication-workflow'>Communication workflow</h1>
<p>Here is an example of the communication workflow between Translation Proxy and Translation Service.</p>

<p><img src="images/communication_workflow.png" alt="Communication workflow" /></p>

<p>To be able to send any data to a Translation Service, website admins are required to have an account with the Translation Service. WPML does not allow to create an account in Translation Services.</p>

<p>And of course, <a href="?shell#receiving">as already hinted</a>, we also assume that as soon as Translation Proxy delivers all files for translation (from WPML to the Translation Service); website admins will complete any further configuration needed for translators to start their work in the Translation Service client panel.</p>
<h1 id='general-api-specifications'>General API Specifications</h1>
<p>Translation Proxy communicates with APIs build based on the <a href="https://jsonapi.org/">{JSON:API}</a> specification.
Use the documentation we provide here and the <a href="https://jsonapi.org/examples/">examples</a> over at {JSON:API} to structure your API.</p>
<h1 id='authentication'>Authentication</h1>
<blockquote>
<p>To authorize, Translation Proxy makes a <code>GET</code> request to a <code>clients</code> API endpoint:</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code>
<span class="no">RestClient</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span>
  <span class="s2">"https://example.com/api/clients"</span><span class="p">,</span> 
  <span class="p">{</span>
    <span class="n">accept</span><span class="ss">:"application/vnd.api+json"</span><span class="p">,</span> 
    <span class="ss">authorization: </span><span class="s2">"Token token=TPynCDt1oAvmyQnZT4Ep4TrI6VfGXgHWLcKa5fmNVaIt"</span>
  <span class="p">}</span>
<span class="p">)</span>

</code></pre><pre class="highlight shell tab-shell"><code>
curl <span class="s2">"https://example.com/api/clients"</span>
  -H <span class="s2">"Authorization: Token token='TPynCDt1oAvmyQnZT4Ep4TrI6VfGXgHWLcKa5fmNVaIt'"</span>
  -H <span class="s2">"Accept: application/vnd.api+json"</span>
</code></pre>
<blockquote>
<p>Make sure to replace <code>TPynCDt1oAvmyQnZT4Ep4TrI6VfGXgHWLcKa5fmNVaIt</code> with your API key.</p>

<p>The above request must return a <a href="https://jsonapi.org/">JSON structured response</a> like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"users"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>When a website admin activates your Translation Service in WPML, he is asked to authorize the connection with a given API Token.
Translation Proxy requests the client account with the provided API Token from your Translation Service.</p>

<p>If the request is successful then your Translation Service is connected to the WPML instance and the website admin is able to send content for translation.</p>

<p>Raise an <a href="https://jsonapi.org/examples/#error-objects">error object</a> when the request is unsuccessful</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET https://example.com/api/clients</code></p>
<h3 id='request-headers'>Request Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>Authorization</td>
<td>Token token=&quot;TPynCDt1oAvmyQnZT4Ep4TrI6VfGXgHWLcKa5fmNVaIt&quot;</td>
</tr>
<tr>
<td>Accept</td>
<td>application/vnd.api+json</td>
</tr>
</tbody></table>

<aside class="notice">
Your Translation Service must provide a <code>unique API Token</code> to each client.
</aside>
<h1 id='language-pairs'>Language Pairs</h1><pre class="highlight ruby tab-ruby"><code>
<span class="no">RestClient</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span>
  <span class="s2">"https://example.com/api/language_pairs"</span><span class="p">,</span> 
  <span class="p">{</span>
    <span class="n">accept</span><span class="ss">:"application/vnd.api+json"</span><span class="p">,</span> 
    <span class="ss">authorization: </span><span class="s2">"Token token=</span><span class="si">#{</span><span class="n">api_token</span><span class="si">}</span><span class="s2">"</span>
  <span class="p">}</span>
<span class="p">)</span>

</code></pre><pre class="highlight shell tab-shell"><code>
curl <span class="s2">"https://example.com/api/language_pairs"</span>
  -H <span class="s2">"Authorization: Token token='</span><span class="nv">$api_token</span><span class="s2">'"</span>
  -H <span class="s2">"Accept: application/vnd.api+json"</span>
</code></pre>
<blockquote>
<p>The above request must return a <a href="https://jsonapi.org/">JSON structured response</a> array like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:[{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"language-pairs"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
       </span><span class="s2">"source-language"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Afrikaans"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"iso-code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"af"</span><span class="w">
       </span><span class="p">},</span><span class="w">
       </span><span class="s2">"target-language"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Amharic"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"iso-code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"am"</span><span class="w">
       </span><span class="p">}</span><span class="w">
     </span><span class="p">}</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>To retrieve supported language pairs, Translation Proxy makes a <code>GET</code> request to a <code>language_pairs</code> API endpoint.
Language pairs may be configured for all user accounts or per account.</p>

<p>Raise an <a href="https://jsonapi.org/examples/#error-objects">error object</a> when the request is unsuccessful</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET https://example.com/api/language_pairs</code></p>
<h3 id='request-headers-2'>Request Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>Authorization</td>
<td>Token token={api_token}</td>
</tr>
<tr>
<td>Accept</td>
<td>application/vnd.api+json</td>
</tr>
</tbody></table>

<aside class="notice">
Please note the <code>json</code> structure of the expected response in the code examples column
</aside>
<h1 id='receiving-content'>Receiving Content</h1><h2 id='create-project'>Create project</h2><pre class="highlight ruby tab-ruby"><code>
<span class="no">RestClient</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span>
  <span class="s2">"https://example.com/api/projects"</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="ss">data: </span><span class="p">{</span>
      <span class="ss">type: </span><span class="s1">'project'</span><span class="p">,</span>
      <span class="ss">attributes: </span><span class="p">{</span>
        <span class="ss">name: </span><span class="s1">'Example project name'</span><span class="p">,</span>
        <span class="ss">deadline: </span><span class="n">unix_timestamp</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="n">accept</span><span class="ss">:"application/vnd.api+json"</span><span class="p">,</span>
    <span class="ss">content_type: :json</span><span class="p">,</span>
    <span class="ss">authorization: </span><span class="s2">"Token token=</span><span class="si">#{</span><span class="n">api_token</span><span class="si">}</span><span class="s2">"</span>
  <span class="p">}</span>
<span class="p">)</span>

</code></pre><pre class="highlight shell tab-shell"><code>
curl -X POST <span class="s2">"https://example.com/api/projects"</span>
  -H <span class="s2">"Authorization: Token token=</span><span class="nv">$api_token</span><span class="s2">"</span>
  -H <span class="s2">"Accept: application/vnd.api+json"</span>
  -H <span class="s2">"Content-Type: application/json"</span>
  -d @- <span class="sh">&lt;&lt;REQUEST_BODY
  {
    "data":{
      "type": "project",
      "attributes": {
        "name": "Example project name",
        "deadline": "$unix_timestamp"
      }
    }
  }
REQUEST_BODY

</span></code></pre>
<blockquote>
<p>The above request must return a <a href="https://jsonapi.org/">JSON structured response</a> like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"projects"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example project name"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"created"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>You may return more attributes. We are mainly showing those that are of interest to Translation Proxy. (<code>status</code> and <code>name</code>)</p>
</blockquote>

<p>To initialize a translation project, Translation Proxy makes a <code>POST</code> request to a <code>projects</code> API endpoint</p>

<p>Raise an <a href="https://jsonapi.org/examples/#error-objects">error object</a> when the request is unsuccessful</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>POST http://example.com/api/projects</code></p>
<h3 id='request-headers-3'>Request Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>Authorization</td>
<td>Token token={api_token}</td>
</tr>
<tr>
<td>Accept</td>
<td>application/vnd.api+json</td>
</tr>
<tr>
<td>Content-Type</td>
<td>application/json</td>
</tr>
</tbody></table>
<h3 id='post-parameters'>Post Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>The project name</td>
</tr>
<tr>
<td>deadline</td>
<td>integer</td>
<td>A suggested deadline as UNIX Timestamp</td>
</tr>
</tbody></table>

<aside class="notice">
Please note the <code>json</code> structure of the expected response in the code examples column
</aside>
<h2 id='add-file-to-project'>Add file to project</h2><pre class="highlight ruby tab-ruby"><code>
<span class="no">RestClient</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span>
  <span class="s2">"https://example.com/api/jobs"</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="ss">data: </span><span class="p">{</span>
      <span class="ss">type: </span><span class="s1">'job'</span><span class="p">,</span>
      <span class="ss">attributes: </span><span class="p">{</span>
        <span class="ss">name: </span><span class="s1">'Example job name'</span><span class="p">,</span>
        <span class="ss">source_language: </span><span class="s1">'iso_code'</span><span class="p">,</span>
        <span class="ss">target_language: </span><span class="s1">'iso_code'</span><span class="p">,</span>
        <span class="ss">file: </span><span class="s1">'xliff_file'</span><span class="p">,</span>
        <span class="ss">file_type: </span><span class="s1">'xliff'</span><span class="p">,</span>
        <span class="ss">callback_url: </span><span class="s1">'https://call-back-url?with_params=value&amp;hash=value'</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="ss">relationships: </span><span class="p">{</span>
        <span class="ss">project: </span><span class="p">{</span>
          <span class="ss">data: </span><span class="p">{</span>
            <span class="ss">type: </span><span class="s1">'project'</span><span class="p">,</span>
            <span class="ss">id: </span><span class="s2">"</span><span class="si">#{</span><span class="n">project_id_from_create_project_request</span><span class="si">}</span><span class="s2">"</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="n">accept</span><span class="ss">:"application/vnd.api+json"</span><span class="p">,</span>
    <span class="ss">content_type: :multipart_form</span><span class="p">,</span>
    <span class="ss">authorization: </span><span class="s2">"Token token=</span><span class="si">#{</span><span class="n">api_token</span><span class="si">}</span><span class="s2">"</span>
  <span class="p">}</span>
<span class="p">)</span>

</code></pre><pre class="highlight shell tab-shell"><code>
curl -X POST <span class="s2">"https://example.com/api/jobs"</span>
  -H <span class="s2">"Authorization: Token token=</span><span class="nv">$api_token</span><span class="s2">"</span>
  -H <span class="s2">"Accept: application/vnd.api+json"</span>
  -F @- <span class="sh">&lt;&lt;REQUEST_BODY
  {
    "data": {
      "type": "job'",
      "attributes": {
        "name": "Example job name",
        "source_language": "iso_code",
        "target_language": "iso_code",
        "file_type": "xliff",
        "callback_url": "https://call-back-url?with_params=value&amp;hash=value",
      },
      "relationships": {
        "project": {
          "data": {
            "type": "project",
            "id": $project_id_from_create_project_request
          }
        }
      }
    }
  }
  -F file=@file.xliff
REQUEST_BODY

</span></code></pre>
<blockquote>
<p>The above request must return a <a href="https://jsonapi.org/">JSON structured response</a> like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jobs"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"created"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>You may return more attributes. We are mainly showing those that is of interest to Translation Proxy. (<code>status</code>)</p>
</blockquote>

<p>To upload a translation job, Translation Proxy makes a <code>POST</code> request to a <code>jobs</code> API endpoint.</p>

<p>Raise an <a href="https://jsonapi.org/examples/#error-objects">error object</a> when the request is unsuccessful</p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>POST http://example.com/api/jobs</code></p>
<h3 id='request-headers-4'>Request Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>Authorization</td>
<td>Token token={api_token}</td>
</tr>
<tr>
<td>Accept</td>
<td>application/vnd.api+json</td>
</tr>
<tr>
<td>Content-Type</td>
<td>multipart/form</td>
</tr>
</tbody></table>
<h3 id='post-parameters-2'>Post Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>The job name</td>
</tr>
<tr>
<td>source_language</td>
<td>string</td>
<td>The source language iso code</td>
</tr>
<tr>
<td>target_language</td>
<td>string</td>
<td>The target language iso code</td>
</tr>
<tr>
<td>file</td>
<td>file</td>
<td>The xliff file</td>
</tr>
<tr>
<td>file_type</td>
<td>string</td>
<td>The file type. Defaults to <code>xliff</code></td>
</tr>
<tr>
<td>callback_url</td>
<td>string</td>
<td>A url for notification callbacks</td>
</tr>
<tr>
<td>relationships - type</td>
<td>string</td>
<td>Defaults to <code>project</code></td>
</tr>
<tr>
<td>relationships - id</td>
<td>integer</td>
<td>The project id</td>
</tr>
</tbody></table>

<aside class="notice">
Please note the <code>json</code> structure of the expected response in the code examples column
</aside>
<h2 id='commit-project'>Commit project</h2><pre class="highlight ruby tab-ruby"><code>
<span class="no">RestClient</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span>
  <span class="s2">"https://example.com/api/projects/</span><span class="si">#{</span><span class="nb">id</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="ss">data: </span><span class="p">{</span>
      <span class="ss">type: </span><span class="s1">'projects'</span><span class="p">,</span>
      <span class="ss">id: </span><span class="s2">"</span><span class="si">#{</span><span class="n">project_id</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
      <span class="ss">attributes: </span><span class="p">{</span>
        <span class="ss">status: </span><span class="s1">'ready'</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="n">accept</span><span class="ss">:"application/vnd.api+json"</span><span class="p">,</span>
    <span class="ss">content_type: :json</span><span class="p">,</span>
    <span class="ss">authorization: </span><span class="s2">"Token token=</span><span class="si">#{</span><span class="n">api_token</span><span class="si">}</span><span class="s2">"</span>
  <span class="p">}</span>
<span class="p">)</span>

</code></pre><pre class="highlight shell tab-shell"><code>
curl -X PATCH <span class="s2">"https://example.com/api/projects/</span><span class="nv">$id</span><span class="s2">"</span>
  -H <span class="s2">"Authorization: Token token=</span><span class="nv">$api_token</span><span class="s2">"</span>
  -H <span class="s2">"Accept: application/vnd.api+json"</span>
  -H <span class="s2">"Content-Type: application/json"</span>
  -d @- <span class="sh">&lt;&lt;REQUEST_BODY
  {
    "data":{
      "type": "projects",
      "id": $project_id,
      "attributes": {
        "status": "ready"
      }
    }
  }
REQUEST_BODY

</span></code></pre>
<blockquote>
<p>The above request must return a <a href="https://jsonapi.org/">JSON structured response</a> like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"projects"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ready"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>You may return more attributes. We are mainly showing those that interest us. (status)</p>
</blockquote>

<p>To commit a translation project, Translation Proxy makes a <code>PATCH</code> request to a <code>projects</code> API endpoint.</p>

<p>Raise an <a href="https://jsonapi.org/examples/#error-objects">error object</a> when the request is unsuccessful</p>
<h3 id='http-request-5'>HTTP Request</h3>
<p><code>POST http://example.com/api/projects/:id</code></p>
<h3 id='request-headers-5'>Request Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>Authorization</td>
<td>Token token={api_token}</td>
</tr>
<tr>
<td>Accept</td>
<td>application/vnd.api+json</td>
</tr>
<tr>
<td>Content-Type</td>
<td>application/json</td>
</tr>
</tbody></table>
<h3 id='post-parameters-3'>Post Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>interger</td>
<td>The project id</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>The project status. Defaults to <code>ready</code></td>
</tr>
</tbody></table>

<aside class="notice">
Please note the <code>json</code> structure of the expected response in the code examples column
</aside>
<h1 id='delivering-content'>Delivering Content</h1><h2 id='notifications'>Notifications</h2><pre class="highlight ruby tab-ruby"><code>
<span class="no">RestClient</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span>
  <span class="s2">"https://tp.api.url/service/notifications/</span><span class="si">#{</span><span class="n">suid</span><span class="si">}</span><span class="s2">?hash=</span><span class="si">#{</span><span class="n">authentication_hash</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="ss">data: </span><span class="p">{</span>
      <span class="ss">type: </span><span class="s1">'notification'</span><span class="p">,</span>
      <span class="ss">attributes: </span><span class="p">{</span>
        <span class="ss">object_id: </span><span class="s1">'job_id'</span><span class="p">,</span>
        <span class="ss">object_type: </span><span class="s1">'job'</span><span class="p">,</span>
        <span class="ss">status: </span><span class="s1">'translation_ready'</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="ss">content_type: :json</span>
  <span class="p">}</span>
<span class="p">)</span>

</code></pre><pre class="highlight shell tab-shell"><code>
curl -X POST <span class="s2">"https://tp.api.url/service/notifications/</span><span class="nv">$suid</span><span class="s2">?hash=</span><span class="nv">$authentication_hash</span><span class="s2">"</span>
  -H <span class="s2">"Content-Type: application/json"</span>
  -d @- <span class="sh">&lt;&lt;REQUEST_BODY
  {
    "data":{
      "type": "notification",
      "attributes": {
        "object_id": "$job_id",
        "object_type": "job",
        "status": "translation_ready",
      }
    }
  }
REQUEST_BODY

</span></code></pre>
<blockquote>
<p>The <code>callback_url</code> was sent with the file upload request</p>
</blockquote>

<p>To download a translated job or cancel a translation job, Translation Proxy expects a <code>POST</code> or <code>GET</code> <a href= '?shell#add-file-to-project'>notification callback</a>.
This is the <a href= '?shell#add-file-to-project'>callback</a> url that was sent with the <code>params</code> during the <code>add file to project</code> request</p>
<h3 id='http-request-6'>HTTP Request</h3>
<p><code>POST https://tp.api.url/service/notifications/:suid?hash=:authentication_hash</code></p>
<h3 id='request-headers-6'>Request Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>application/json</td>
</tr>
</tbody></table>
<h3 id='post-parameters-4'>Post Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>string</td>
<td>The callback type. Expects <code>notification</code></td>
</tr>
<tr>
<td>object_id</td>
<td>integer</td>
<td>The resource id. The id returned in the response when the job was created.</td>
</tr>
<tr>
<td>object_type</td>
<td>string</td>
<td>The resource type. Expects <code>job</code></td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>The job status. Accepts <code>translation_ready</code> or <code>cancelled</code></td>
</tr>
</tbody></table>

<aside class="notice">
Please note the <code>json</code> structure of the expected response in the code examples column
</aside>
<h2 id='job-status'>Job Status</h2><pre class="highlight ruby tab-ruby"><code>
<span class="no">RestClient</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span>
  <span class="s2">"https://example.com/api/jobs/</span><span class="si">#{</span><span class="nb">id</span><span class="si">}</span><span class="s2">"</span>
  <span class="p">{</span>
    <span class="n">accept</span><span class="ss">:"application/vnd.api+json"</span><span class="p">,</span>
    <span class="ss">authorization: </span><span class="s2">"Token token=</span><span class="si">#{</span><span class="n">api_token</span><span class="si">}</span><span class="s2">"</span>
  <span class="p">}</span>
<span class="p">)</span>

</code></pre><pre class="highlight shell tab-shell"><code>
curl <span class="s2">"https://example.com/api/jobs/</span><span class="nv">$id</span><span class="s2">"</span>
  -H <span class="s2">"Authorization: Token token=</span><span class="nv">$api_token</span><span class="s2">"</span>
  -H <span class="s2">"Accept: application/vnd.api+json"</span>

</code></pre>
<blockquote>
<p>The above request must return a <a href="https://jsonapi.org/">JSON structured response</a> like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"job"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example job name"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"source_language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"iso_code"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"target_language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"iso_code"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"translation_ready"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"relationships"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"translation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"translation"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>You may return more attributes. We are mainly showing those that are of interest to Translation Proxy. (<code>status</code>, <code>relationships</code>)</p>
</blockquote>

<p>Before responding to a notification callback, Translation Proxy makes a <code>GET</code> request to a <code>jobs/:id</code> API endpoint to check the status of the job.
Only a <code>cancelled</code> or <code>translation_ready</code> status will give permission to Translation Proxy to take further action - i.e. to download a completed translation or cancel a translation job.</p>

<p>Raise an <a href="https://jsonapi.org/examples/#error-objects">error object</a> when the request is unsuccessful</p>
<h3 id='http-request-7'>HTTP Request</h3>
<p><code>POST http://example.com/api/jobs/:id</code></p>
<h3 id='request-headers-7'>Request Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>Authorization</td>
<td>Token token={api_token}</td>
</tr>
<tr>
<td>Accept</td>
<td>application/vnd.api+json</td>
</tr>
</tbody></table>

<aside class="notice">
Please note the <code>json</code> structure of the expected response in the code examples column.
</aside>
<h2 id='download-translation'>Download Translation</h2><pre class="highlight ruby tab-ruby"><code>
<span class="no">RestClient</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span>
  <span class="s2">"https://example.com/api/translations/</span><span class="si">#{</span><span class="nb">id</span><span class="si">}</span><span class="s2">"</span>
  <span class="p">{</span>
    <span class="n">accept</span><span class="ss">:"application/vnd.api+json"</span><span class="p">,</span>
    <span class="ss">authorization: </span><span class="s2">"Token token=</span><span class="si">#{</span><span class="n">api_token</span><span class="si">}</span><span class="s2">"</span>
  <span class="p">}</span>
<span class="p">)</span>

</code></pre><pre class="highlight shell tab-shell"><code>
curl <span class="s2">"https://example.com/api/translations/</span><span class="nv">$id</span><span class="s2">"</span>
  -H <span class="s2">"Authorization: Token token=</span><span class="nv">$api_token</span><span class="s2">"</span>
  -H <span class="s2">"Accept: application/vnd.api+json"</span>

</code></pre>
<blockquote>
<p>The above request must return the translated content in the response body</p>
</blockquote>

<p>To download a completed translation, Translation Proxy makes a <code>GET</code> request to a <code>translations</code> API endpoint</p>

<p>Raise an <a href="https://jsonapi.org/examples/#error-objects">error object</a> when the request is unsuccessful</p>
<h3 id='http-request-8'>HTTP Request</h3>
<p><code>POST http://example.com/api/translations/:id</code></p>
<h3 id='request-headers-8'>Request Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>Authorization</td>
<td>Token token={api_token}</td>
</tr>
<tr>
<td>Accept</td>
<td>application/vnd.api+json</td>
</tr>
</tbody></table>
<h2 id='confirm-delivery'>Confirm Delivery</h2><pre class="highlight ruby tab-ruby"><code>
<span class="no">RestClient</span><span class="p">.</span><span class="nf">patch</span><span class="p">(</span>
  <span class="s2">"https://example.com/api/jobs/</span><span class="si">#{</span><span class="nb">id</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="ss">data: </span><span class="p">{</span>
      <span class="ss">type: </span><span class="s1">'jobs'</span><span class="p">,</span>
      <span class="ss">id: </span><span class="s2">"</span><span class="si">#{</span><span class="n">job_id</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
      <span class="ss">attributes: </span><span class="p">{</span>
        <span class="ss">status: </span><span class="s1">'delivered'</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="n">accept</span><span class="ss">:"application/vnd.api+json"</span><span class="p">,</span>
    <span class="ss">content_type: :json</span><span class="p">,</span>
    <span class="ss">authorization: </span><span class="s2">"Token token=</span><span class="si">#{</span><span class="n">api_token</span><span class="si">}</span><span class="s2">"</span>
  <span class="p">}</span>
<span class="p">)</span>

</code></pre><pre class="highlight shell tab-shell"><code>
curl -X PATCH <span class="s2">"https://example.com/api/jobs/</span><span class="nv">$id</span><span class="s2">"</span>
  -H <span class="s2">"Authorization: Token token=</span><span class="nv">$api_token</span><span class="s2">"</span>
  -H <span class="s2">"Accept: application/vnd.api+json"</span>
  -H <span class="s2">"Content-Type: application/json"</span>
  -d @- <span class="sh">&lt;&lt;REQUEST_BODY
  {
    "data":{
      "type": "jobs",
      "id": $job_id,
      "attributes": {
        "status": "delivered"
      }
    }
  }
REQUEST_BODY

</span></code></pre>
<blockquote>
<p>The above request must return a <a href="https://jsonapi.org/">JSON structured response</a> like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jobs"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"delivered"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>You may return more attributes. We are mainly showing what is of interest to Translation Proxy. (<code>status</code>)</p>
</blockquote>

<p>To confirm a translation delivery, Translation Proxy makes a <code>PATCH</code> request to a <code>jobs</code> API endpoint</p>

<p>Raise an <a href="https://jsonapi.org/examples/#error-objects">error object</a> when the request is unsuccessful</p>
<h3 id='http-request-9'>HTTP Request</h3>
<p><code>POST http://example.com/api/jobs/:id</code></p>
<h3 id='request-headers-9'>Request Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>Authorization</td>
<td>Token token={api_token}</td>
</tr>
<tr>
<td>Accept</td>
<td>application/vnd.api+json</td>
</tr>
<tr>
<td>Content-Type</td>
<td>application/json</td>
</tr>
</tbody></table>
<h3 id='post-parameters-5'>Post Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>interger</td>
<td>The job id</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>The job status. Defaults to <code>delivered</code></td>
</tr>
</tbody></table>

<aside class="notice">
Please note the <code>json</code> structure of the expected response in the code examples column
</aside>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="ruby">ruby</a>
          </div>
      </div>
    </div>
  </body>
</html>
